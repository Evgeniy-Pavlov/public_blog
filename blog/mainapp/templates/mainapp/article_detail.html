{% extends "base.html" %}
{% load static %}

{% block body %}
<a href="/">Вернуться к списку</a>
    <h1 class="display-6">{{object.title}}</h1>
    {% if art.author.id == user.id or user.is_superuser %}
    <p class="card-text"><a href="/article-update/{{object.id}}">Редактировать</a></p>
    <p class="card-text"><a href="/article-delete/{{object.id}}">Удалить</a></p>
    {% endif %}
    <p class="lead">
        Автор: @{{object.author.usertag}} Создано: {{object.date_create}}
      </p>
      {% if object.author.company %}
        <p class="lead">
            Компания: {{object.author.company}}
        </p>
      {% endif %}
    <div class="bd-example-snippet bd-code-snippet"><p>{{object.body | safe}}</p></div>
    {% if user.is_authenticated %}
    <div>
      <p class="card-text text-bg-info mb-3">Понравилось пользователям: {{object.likesarticle_set.all.count}}</p>
      <form action="/liked/{{object.id}}", method="post">
        {% csrf_token %}
        <button class="btn btn-primary" style="margin-bottom: 10px;">
          <svg src="{% static 'img/heart.svg' %}" fill="currentColor" width="16" height="16" viewBox="0 0 16 16">
            <path fill-rule="evenodd" d="M8 1.314C12.438-3.248 23.534 4.735 8 15-7.534 4.736 3.562-3.248 8 1.314z"></path>
          </svg>
          Понравилось
        </button>
      </form>
    </div>
    <div class="mb-3">
      <h5 class="display-6">Оставьте комментарий тут</h5>
    <form action="/comments-create/{{object.id}}" method="post">
      {% csrf_token %}
      <textarea class="form-control" id="exampleFormControlTextarea1" rows="3" placeholder="Введите комментарий тут" name="text_comments"></textarea>
      <button class="btn btn-primary" style="margin-top: 10px;">Отправить комментарий</button>
    </form> 
  </div>
    {% endif %}
    
    {% for comment in object.commentsarticle_set.all %}
      <div class="list-item">
        <div class="card-header text-primary mb-3">
          <p>@{{comment.commentator.usertag}}</p>
          <p>{{comment.date_create}}</p>
        </div>
        <div class="card-body ">
          <p class="card-text text-bg-info mb-3">{{comment.text_comments}}</p>
        </div>
      </div>
    {% endfor %}
{% endblock  %}